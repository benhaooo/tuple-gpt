# 音频识别工具测试指南

## 🚀 快速测试步骤

### 1. 访问工具页面
1. 打开浏览器访问：`http://localhost:5174/#/chat/tool`
2. 在工具页面中找到"音频识别"工具
3. 点击进入音频识别界面

### 2. 配置 API（必需）
1. 点击右上角的"配置"按钮
2. 填入以下信息：
   - **API URL**: `https://api.openai.com/v1/audio/transcriptions`
   - **API Key**: 您的 OpenAI API Key（格式：sk-...）
   - **模型**: 选择 `whisper-1`
3. 点击"保存配置"

### 3. 测试文件上传
#### 方式一：点击上传
1. 点击上传区域
2. 选择一个音频/视频文件（支持格式：MP3、WAV、M4A、FLAC、AAC、OGG、WMA、MP4）
3. 确认文件信息显示正确

#### 方式二：拖拽上传
1. 从文件管理器中拖拽音频/视频文件
2. 拖拽到上传区域
3. 松开鼠标完成上传

### 4. 设置识别选项
1. **语言选择**：
   - 自动检测（推荐）
   - 或选择具体语言（中文、英文等）
2. **输出格式**：
   - 纯文本（推荐用于测试）
   - JSON、SRT、VTT（高级用途）

### 5. 开始识别
1. 点击"开始识别"按钮
2. 观察上传进度条
3. 等待识别完成

### 6. 验证结果
1. 检查识别结果是否准确
2. 测试"复制"功能
3. 测试"下载"功能
4. 测试"清除"功能

## 🧪 测试用例

### 基础功能测试

#### 测试用例 1：文件格式验证
- **目标**: 验证文件格式检查
- **步骤**: 尝试上传非音频/视频文件（如 .txt、.jpg）
- **预期**: 显示错误提示"请选择有效的音频文件格式"

#### 测试用例 2：文件大小限制
- **目标**: 验证文件大小限制
- **步骤**: 尝试上传超过 100MB 的音频文件
- **预期**: 显示错误提示"文件大小不能超过 100 MB"

#### 测试用例 3：配置验证
- **目标**: 验证 API 配置检查
- **步骤**: 不配置 API Key，直接点击"开始识别"
- **预期**: 按钮保持禁用状态或显示配置提示

#### 测试用例 4：拖拽上传
- **目标**: 验证拖拽上传功能
- **步骤**: 拖拽音频文件到上传区域
- **预期**: 
  - 拖拽时区域高亮显示
  - 松开后文件信息正确显示

### 识别功能测试

#### 测试用例 5：中文音频识别
- **目标**: 测试中文语音识别准确性
- **步骤**: 上传中文音频，设置语言为"中文"
- **预期**: 识别结果准确，中文字符正确显示

#### 测试用例 6：英文音频识别
- **目标**: 测试英文语音识别准确性
- **步骤**: 上传英文音频，设置语言为"英文"
- **预期**: 识别结果准确，英文单词正确拼写

#### 测试用例 7：自动语言检测
- **目标**: 测试自动语言检测功能
- **步骤**: 上传音频，语言设置为"自动检测"
- **预期**: 系统自动识别语言并给出准确结果

#### 测试用例 8：不同输出格式
- **目标**: 测试不同输出格式
- **步骤**: 分别测试 text、json、srt、vtt 格式
- **预期**: 每种格式都能正确输出对应格式的结果

#### 测试用例 9：MP4 视频文件识别
- **目标**: 测试 MP4 视频文件的音频识别
- **步骤**: 上传包含音频轨道的 MP4 视频文件
- **预期**:
  - 文件上传成功
  - 系统提取音频轨道进行识别
  - 识别结果准确反映视频中的语音内容

### 用户体验测试

#### 测试用例 10：进度显示
- **目标**: 验证进度显示功能
- **步骤**: 上传较大的音频文件
- **预期**: 
  - 显示上传进度条
  - 进度文字实时更新
  - 完成后显示成功提示

#### 测试用例 11：错误处理
- **目标**: 测试错误处理机制
- **步骤**: 使用错误的 API Key 或断网状态下识别
- **预期**: 显示友好的错误提示信息

#### 测试用例 12：结果操作
- **目标**: 测试结果操作功能
- **步骤**:
  1. 复制完整结果到剪贴板
  2. 下载结果文件
  3. 清除结果
- **预期**:
  - 复制成功提示
  - 文件下载成功
  - 清除后结果区域消失

#### 测试用例 13：智能文本复制
- **目标**: 测试 JSON 格式结果的智能文本提取
- **步骤**:
  1. 设置输出格式为 "JSON"
  2. 完成音频识别
  3. 验证显示"复制文本"按钮
  4. 点击"复制文本"按钮
  5. 粘贴到文本编辑器验证内容
- **预期**:
  - JSON 格式结果显示"复制文本"按钮
  - 复制的内容为纯文本，不包含 JSON 结构
  - 文本内容与音频内容一致

### 响应式设计测试

#### 测试用例 14：移动端适配
- **目标**: 验证移动端显示效果
- **步骤**: 调整浏览器窗口到移动端尺寸
- **预期**: 界面布局自适应，操作正常

#### 测试用例 15：主题切换
- **目标**: 验证主题适配
- **步骤**: 切换浏览器的深色/浅色模式
- **预期**: 界面颜色正确切换，文字清晰可读

## 🔧 故障排除

### 常见问题及解决方案

1. **工具页面不显示音频识别工具**
   - 检查 `config.js` 是否正确配置
   - 刷新页面重试

2. **上传文件后没有反应**
   - 检查文件格式是否支持
   - 检查文件大小是否超限
   - 查看浏览器控制台错误信息

3. **识别失败**
   - 验证 API Key 是否正确
   - 检查网络连接
   - 确认 API URL 是否正确

4. **识别结果不准确**
   - 尝试设置正确的音频语言
   - 检查音频质量是否清晰
   - 尝试不同的音频文件

5. **复制功能不工作**
   - 检查浏览器是否支持剪贴板 API
   - 确保页面在 HTTPS 或 localhost 环境下运行

## 📊 性能测试

### 建议的测试音频文件

1. **小文件测试** (< 1MB)
   - 测试基本功能
   - 验证快速响应

2. **中等文件测试** (1-10MB)
   - 测试进度显示
   - 验证稳定性

3. **大文件测试** (10-50MB)
   - 测试性能表现
   - 验证错误处理

### 性能指标

- **上传速度**: 应该有明显的进度反馈
- **识别速度**: 通常几秒到几分钟不等（取决于文件大小）
- **内存使用**: 浏览器内存使用应该保持稳定
- **错误恢复**: 网络中断后应该能够重试

## ✅ 测试检查清单

- [ ] 工具页面正常显示
- [ ] 配置对话框功能正常
- [ ] 文件上传（点击和拖拽）正常
- [ ] 文件格式验证正常
- [ ] 文件大小限制正常
- [ ] 语言选择功能正常
- [ ] 输出格式选择正常
- [ ] 识别进度显示正常
- [ ] 识别结果正确显示
- [ ] 复制全部功能正常
- [ ] 复制文本功能正常（JSON 格式时）
- [ ] 智能文本提取准确
- [ ] 下载功能正常
- [ ] 清除功能正常
- [ ] 错误提示友好
- [ ] 响应式设计正常
- [ ] 主题切换正常

完成以上测试后，音频识别工具就可以正式投入使用了！
